import{j as n,r as d}from"./index-YdY7dRhB.js";const R=e=>n.jsx("div",{className:`card ${e.className}`,style:e.style,children:e.children}),o="REQUIRE",A="MINLENGTH",T="MAXLENGTH",m="MIN",N="MAX",I="EMAIL",_=()=>({type:o}),L=e=>({type:A,val:e}),H=e=>({type:T,val:e}),p=()=>({type:I}),f=(e,t)=>{let a=!0;for(const i of t)i.type===o&&(a=a&&e.trim().length>0),i.type===A&&(a=a&&e.trim().length>=i.val),i.type===T&&(a=a&&e.trim().length<=i.val),i.type===m&&(a=a&&+e>=i.val),i.type===N&&(a=a&&+e<=i.val),i.type===I&&(a=a&&/^\S+@\S+\.\S+$/.test(e));return a},h=(e,t)=>{switch(t.type){case"CHANGE":return{...e,value:t.val,isValid:f(t.val,t.validators)};case"TOUCH":return{...e,isTouched:!0};default:return e}},D=e=>{const[t,a]=d.useReducer(h,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValidity||!1}),{id:i,onInput:u}=e,{value:r,isValid:s}=t;d.useEffect(()=>{u(i,r,s)},[i,r,s,u]);const l=V=>{a({type:"CHANGE",val:V.target.value,validators:e.validators})},c=()=>{a({type:"TOUCH"})},E=e.element==="input"?n.jsx("input",{id:e.id,name:e.name,type:e.type,placeholder:e.placeholder,value:t.value,onChange:l,onBlur:c,className:`${e.className} ${!t.isValid&&"add-item-invalid"}`}):n.jsx("textarea",{id:e.id,name:e.name,rows:e.rows||3,placeholder:e.placeholder,value:t.value,onChange:l,onBlur:c,className:`${e.className} ${!t.isValid&&t.isTouched&&"add-item-invalid"}`});return n.jsxs(n.Fragment,{children:[E,!t.isValid&&t.isTouched&&n.jsx("div",{className:"err",children:e.errorText})]})},v=(e,t)=>{switch(t.type){case"INPUT_CHANGE":let a=!0;for(const i in e.inputs)e.inputs[i]&&(i===t.inputId?a=a&&t.isValid:a=a&&e.inputs[i].isValid);return{...e,inputs:{...e.inputs,[t.inputId]:{value:t.value,isValid:t.isValid}},isValid:a};case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},M=(e,t)=>{const[a,i]=d.useReducer(v,{inputs:e,isValid:t}),u=d.useCallback((s,l,c)=>{i({type:"INPUT_CHANGE",value:l,isValid:c,inputId:s})},[]),r=d.useCallback((s,l)=>{i({type:"SET_DATA",inputs:s,formIsValid:l})},[]);return[a,u,r]};export{R as C,D as I,_ as V,L as a,H as b,p as c,M as u};
