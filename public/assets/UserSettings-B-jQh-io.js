import{r as o,A as x,a as j,j as e,L as f}from"./index-D1Lswkrq.js";import{u as C,E as v}from"./http-hook-B9TVr8Bm.js";const S=()=>{const l=o.useContext(x),a=j().uid,{isLoading:d,error:u,sendRequest:n,clearError:h}=C(),[s,m]=o.useState(),[t,c]=o.useState("#ffd900");o.useEffect(()=>{(async()=>{try{const r=await n(`https://todoapp-backend-vqt1.onrender.com/api/users/${a}/userInfo`,"GET",null,{Authorization:"Bearer "+l.token});m({name:r.name,email:r.email,createdAt:r.createdAt}),c(r.userTitleColor||"#ffd900")}catch{}})()},[n,a]);const p=async(i=t)=>{try{await n(`https://todoapp-backend-vqt1.onrender.com/api/users/${a}/color`,"PATCH",JSON.stringify({userTitleColor:t}),{"Content-Type":"application/json",Authorization:"Bearer "+l.token})}catch{}};return e.jsxs(e.Fragment,{children:[e.jsx(v,{error:u,onClear:h}),d&&e.jsx(f,{asOverlay:!0}),s&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"user-set-container",children:[e.jsxs("div",{className:"user-set-item",children:[e.jsx("h1",{children:"User information"}),e.jsxs("p",{children:["User name: ",s.name]}),e.jsxs("p",{children:["Email: ",s.email]}),e.jsxs("p",{children:["Joined:"," ",new Date(s.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),e.jsxs("div",{className:"user-set-item",children:[e.jsx("h1",{children:"Custom item color"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"colorPicker",children:"Pick color: "}),e.jsx("input",{id:"colorPicker",type:"color",value:t,onChange:i=>c(i.target.value)})]}),e.jsx("button",{onClick:()=>c("#ffd900"),className:"user-set-text-button",style:{"--user-title-color":t},children:"Set to default color"}),e.jsxs("p",{children:["Selected color: ",e.jsx("span",{style:{color:t},children:t})]}),e.jsx("button",{className:"user-set-save-button",onClick:p,children:"Save Color"})]})]})})]})};export{S as default};
