import{g as w,b as H,j as c,r as h,R as x}from"./index-BH1K1oee.js";var G=H();const T=w(G),nt=t=>c.jsx("div",{className:`card ${t.className}`,style:t.style,children:t.children}),D="REQUIRE",L="MINLENGTH",U="MAXLENGTH",X="MIN",F="MAX",V="EMAIL",st=()=>({type:D}),rt=t=>({type:L,val:t}),at=()=>({type:V}),B=(t,n)=>{let i=!0;for(const e of n)e.type===D&&(i=i&&t.trim().length>0),e.type===L&&(i=i&&t.trim().length>=e.val),e.type===U&&(i=i&&t.trim().length<=e.val),e.type===X&&(i=i&&+t>=e.val),e.type===F&&(i=i&&+t<=e.val),e.type===V&&(i=i&&/^\S+@\S+\.\S+$/.test(t));return i},Y=(t,n)=>{switch(n.type){case"CHANGE":return{...t,value:n.val,isValid:B(n.val,n.validators)};case"TOUCH":return{...t,isTouched:!0};default:return t}},it=t=>{const[n,i]=h.useReducer(Y,{value:t.initialValue||"",isTouched:!1,isValid:t.initialValidity||!1}),{id:e,onInput:a}=t,{value:s,isValid:o}=n;h.useEffect(()=>{a(e,s,o)},[e,s,o,a]);const r=d=>{i({type:"CHANGE",val:d.target.value,validators:t.validators})},l=()=>{i({type:"TOUCH"})},u=t.element==="input"?c.jsx("input",{id:t.id,name:t.name,type:t.type,placeholder:t.placeholder,value:n.value,onChange:r,onBlur:l,className:`${t.className} ${!n.isValid&&"add-item-invalid"}`}):c.jsx("textarea",{id:t.id,name:t.name,rows:t.rows||3,placeholder:t.placeholder,value:n.value,onChange:r,onBlur:l,className:`${t.className} ${!n.isValid&&n.isTouched&&"add-item-invalid"}`});return c.jsxs(c.Fragment,{children:[u,!n.isValid&&n.isTouched&&c.jsx("div",{className:"err",children:t.errorText})]})};function O(){return O=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var e in i)({}).hasOwnProperty.call(i,e)&&(t[e]=i[e])}return t},O.apply(null,arguments)}function j(t,n){if(t==null)return{};var i={};for(var e in t)if({}.hasOwnProperty.call(t,e)){if(n.indexOf(e)!==-1)continue;i[e]=t[e]}return i}function R(t,n){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,e){return i.__proto__=e,i},R(t,n)}function k(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,R(t,n)}function q(t,n){return t.classList?!!n&&t.classList.contains(n):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+n+" ")!==-1}function Q(t,n){t.classList?t.classList.add(n):q(t,n)||(typeof t.className=="string"?t.className=t.className+" "+n:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+n))}function _(t,n){return t.replace(new RegExp("(^|\\s)"+n+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function W(t,n){t.classList?t.classList.remove(n):typeof t.className=="string"?t.className=_(t.className,n):t.setAttribute("class",_(t.className&&t.className.baseVal||"",n))}const y={disabled:!1},M=x.createContext(null);var P=function(n){return n.scrollTop},A="unmounted",v="exited",m="entering",N="entered",S="exiting",E=function(t){k(n,t);function n(e,a){var s;s=t.call(this,e,a)||this;var o=a,r=o&&!o.isMounting?e.enter:e.appear,l;return s.appearStatus=null,e.in?r?(l=v,s.appearStatus=m):l=N:e.unmountOnExit||e.mountOnEnter?l=A:l=v,s.state={status:l},s.nextCallback=null,s}n.getDerivedStateFromProps=function(a,s){var o=a.in;return o&&s.status===A?{status:v}:null};var i=n.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(a){var s=null;if(a!==this.props){var o=this.state.status;this.props.in?o!==m&&o!==N&&(s=m):(o===m||o===N)&&(s=S)}this.updateStatus(!1,s)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var a=this.props.timeout,s,o,r;return s=o=r=a,a!=null&&typeof a!="number"&&(s=a.exit,o=a.enter,r=a.appear!==void 0?a.appear:o),{exit:s,enter:o,appear:r}},i.updateStatus=function(a,s){if(a===void 0&&(a=!1),s!==null)if(this.cancelNextCallback(),s===m){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:T.findDOMNode(this);o&&P(o)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===v&&this.setState({status:A})},i.performEnter=function(a){var s=this,o=this.props.enter,r=this.context?this.context.isMounting:a,l=this.props.nodeRef?[r]:[T.findDOMNode(this),r],u=l[0],d=l[1],f=this.getTimeouts(),p=r?f.appear:f.enter;if(!a&&!o||y.disabled){this.safeSetState({status:N},function(){s.props.onEntered(u)});return}this.props.onEnter(u,d),this.safeSetState({status:m},function(){s.props.onEntering(u,d),s.onTransitionEnd(p,function(){s.safeSetState({status:N},function(){s.props.onEntered(u,d)})})})},i.performExit=function(){var a=this,s=this.props.exit,o=this.getTimeouts(),r=this.props.nodeRef?void 0:T.findDOMNode(this);if(!s||y.disabled){this.safeSetState({status:v},function(){a.props.onExited(r)});return}this.props.onExit(r),this.safeSetState({status:S},function(){a.props.onExiting(r),a.onTransitionEnd(o.exit,function(){a.safeSetState({status:v},function(){a.props.onExited(r)})})})},i.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(a,s){s=this.setNextCallback(s),this.setState(a,s)},i.setNextCallback=function(a){var s=this,o=!0;return this.nextCallback=function(r){o&&(o=!1,s.nextCallback=null,a(r))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},i.onTransitionEnd=function(a,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:T.findDOMNode(this),r=a==null&&!this.props.addEndListener;if(!o||r){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=l[0],d=l[1];this.props.addEndListener(u,d)}a!=null&&setTimeout(this.nextCallback,a)},i.render=function(){var a=this.state.status;if(a===A)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var r=j(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return x.createElement(M.Provider,{value:null},typeof o=="function"?o(a,r):x.cloneElement(x.Children.only(o),r))},n}(x.Component);E.contextType=M;E.propTypes={};function g(){}E.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:g,onEntering:g,onEntered:g,onExit:g,onExiting:g,onExited:g};E.UNMOUNTED=A;E.EXITED=v;E.ENTERING=m;E.ENTERED=N;E.EXITING=S;var z=function(n,i){return n&&i&&i.split(" ").forEach(function(e){return Q(n,e)})},b=function(n,i){return n&&i&&i.split(" ").forEach(function(e){return W(n,e)})},I=function(t){k(n,t);function n(){for(var e,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,e.appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(r,l){var u=e.resolveArguments(r,l),d=u[0],f=u[1];e.removeClasses(d,"exit"),e.addClass(d,f?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(r,l)},e.onEntering=function(r,l){var u=e.resolveArguments(r,l),d=u[0],f=u[1],p=f?"appear":"enter";e.addClass(d,p,"active"),e.props.onEntering&&e.props.onEntering(r,l)},e.onEntered=function(r,l){var u=e.resolveArguments(r,l),d=u[0],f=u[1],p=f?"appear":"enter";e.removeClasses(d,p),e.addClass(d,p,"done"),e.props.onEntered&&e.props.onEntered(r,l)},e.onExit=function(r){var l=e.resolveArguments(r),u=l[0];e.removeClasses(u,"appear"),e.removeClasses(u,"enter"),e.addClass(u,"exit","base"),e.props.onExit&&e.props.onExit(r)},e.onExiting=function(r){var l=e.resolveArguments(r),u=l[0];e.addClass(u,"exit","active"),e.props.onExiting&&e.props.onExiting(r)},e.onExited=function(r){var l=e.resolveArguments(r),u=l[0];e.removeClasses(u,"exit"),e.addClass(u,"exit","done"),e.props.onExited&&e.props.onExited(r)},e.resolveArguments=function(r,l){return e.props.nodeRef?[e.props.nodeRef.current,r]:[r,l]},e.getClassNames=function(r){var l=e.props.classNames,u=typeof l=="string",d=u&&l?l+"-":"",f=u?""+d+r:l[r],p=u?f+"-active":l[r+"Active"],C=u?f+"-done":l[r+"Done"];return{baseClassName:f,activeClassName:p,doneClassName:C}},e}var i=n.prototype;return i.addClass=function(a,s,o){var r=this.getClassNames(s)[o+"ClassName"],l=this.getClassNames("enter"),u=l.doneClassName;s==="appear"&&o==="done"&&u&&(r+=" "+u),o==="active"&&a&&P(a),r&&(this.appliedClasses[s][o]=r,z(a,r))},i.removeClasses=function(a,s){var o=this.appliedClasses[s],r=o.base,l=o.active,u=o.done;this.appliedClasses[s]={},r&&b(a,r),l&&b(a,l),u&&b(a,u)},i.render=function(){var a=this.props;a.classNames;var s=j(a,["classNames"]);return x.createElement(E,O({},s,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(x.Component);I.defaultProps={classNames:""};I.propTypes={};const J=t=>T.createPortal(c.jsx("div",{className:"backdrop",onClick:t.onClickProp}),document.getElementById("backdrop-hook")),K=t=>{const n=c.jsxs("div",{ref:t.nodeRef,className:`modal ${t.className}`,style:t.style,children:[c.jsx("header",{className:`modal__header ${t.headerClass}`,children:c.jsx("h2",{children:t.header})}),c.jsxs("form",{onSubmit:t.onSubmit?t.onSubmit:i=>i.preventDefault(),children:[c.jsx("div",{className:`modal__content ${t.contentClass}`,children:t.children}),c.jsx("footer",{className:`modal__footer ${t.footerClass}`,children:t.footer})]})]});return T.createPortal(n,document.getElementById("modal-hook"))},Z=t=>{const n=h.useRef(null);return c.jsxs(c.Fragment,{children:[t.show&&c.jsx(J,{onClickProp:t.onCancel}),c.jsx(I,{in:t.show,mountOnEnter:!0,unmountOnExit:!0,timeout:300,classNames:"fade",nodeRef:n,children:c.jsx(K,{...t,nodeRef:n})})]})},ot=t=>c.jsx(Z,{onCancel:t.onClear,header:"âœ–",headerClass:"err-modal",show:!!t.error,footer:c.jsx("button",{onClick:t.onClear,children:"Ok"}),children:c.jsx("p",{children:t.error})}),tt=(t,n)=>{switch(n.type){case"INPUT_CHANGE":let i=!0;for(const e in t.inputs)t.inputs[e]&&(e===n.inputId?i=i&&n.isValid:i=i&&t.inputs[e].isValid);return{...t,inputs:{...t.inputs,[n.inputId]:{value:n.value,isValid:n.isValid}},isValid:i};case"SET_DATA":return{inputs:n.inputs,isValid:n.formIsValid};default:return t}},lt=(t,n)=>{const[i,e]=h.useReducer(tt,{inputs:t,isValid:n}),a=h.useCallback((o,r,l)=>{e({type:"INPUT_CHANGE",value:r,isValid:l,inputId:o})},[]),s=h.useCallback((o,r)=>{e({type:"SET_DATA",inputs:o,formIsValid:r})},[]);return[i,a,s]},ut=()=>{const[t,n]=h.useState(!1),[i,e]=h.useState(),a=h.useRef([]),s=h.useCallback(async(r,l="GET",u=null,d={})=>{n(!0);const f=new AbortController;a.current.push(f);try{const p=await fetch(r,{method:l,body:u,headers:d,signal:f.signal}),C=await p.json();if(a.current=a.current.filter($=>$!==f),!p.ok)throw new Error(C.message);return n(!1),C}catch(p){if(a.current=a.current.filter(C=>C!==f),p.name!=="AbortError")throw e(p.message),p;n(!1)}},[]),o=()=>{e(null)};return h.useEffect(()=>()=>{a.current.forEach(r=>r.abort())},[]),{isLoading:t,error:i,sendRequest:s,clearError:o}};export{J as B,nt as C,ot as E,it as I,Z as M,T as R,st as V,lt as a,rt as b,I as c,at as d,ut as u};
